!function(e){function t(r){if(n[r])return n[r].exports;var a=n[r]={exports:{},id:r,loaded:!1};return e[r].call(a.exports,a,a.exports,t),a.loaded=!0,a.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){e.exports=n(32)},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(){n(this,e),this.__hash={}}return r(e,[{key:"on",value:function(e,t){var n=this;if(Array.isArray(e))e.forEach(function(e){n.on(e,t)});else if(t){n.__hash.hasOwnProperty(e)||(n.__hash[e]=[]);for(var r=0,a=n.__hash[e],i=a.length;i>r;r++)if(a[r]===t)return n;n.__hash[e].push(t)}return n}},{key:"once",value:function(e,t){var n=this;if(Array.isArray(e))e.forEach(function(e){n.once(e,t)});else if(t){var r=function a(){for(var r=arguments.length,i=Array(r),o=0;r>o;o++)i[o]=arguments[o];t.apply(this,i),n.off(e,a)};n.on(e,r)}return this}},{key:"off",value:function(e,t){var n=this;if(Array.isArray(e))e.forEach(function(e){n.off(e,t)});else if(n.__hash.hasOwnProperty(e))if(t){for(var r=0,a=n.__hash[e],i=a.length;i>r;r++)if(a[r]===t){a.splice(r,1);break}}else delete n.__hash[e];return this}},{key:"emit",value:function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;t>r;r++)n[r-1]=arguments[r];var a=this;if(Array.isArray(e))e.forEach(function(e){a.emit(e,n)});else if(a.__hash.hasOwnProperty(e)){var i=a.__hash[e].slice();i.forEach(function(e){e.apply(a,n)})}return this}}],[{key:"mix",value:function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];n.forEach(function(t){var n=new e;t.__hash={};var r=["on","once","off","emit"];r.forEach(function(e){t[e]=n[e]})})}}]),e}();a.DOM="DOM",a.DESTROY="DESTROY",a.DATA="DATA",t["default"]=a},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e){if(e instanceof h["default"])return e;if(o(e))return e;var t=Array.isArray(e)?[]:{};for(var n in e)if(e.hasOwnProperty(n)){var r=e[n];r instanceof h["default"]?t[n]=r:p.isDate(r)?t[n]=new Date(r):t[n]=p.isObject(r)?a(r):r}return t}function i(e){return function(t){return _.call(t)=="[object "+e+"]"}}function o(e){return void 0===e||null===e||p.isBoolean(e)||p.isNumber(e)||p.isString(e)}function u(e,t){if(e instanceof h["default"]||t instanceof h["default"])return e==t;if(o(e)||o(t))return e===t;if(Array.isArray(e)){if(!Array.isArray(t))return!1;if(e.length!=t.length)return!1;for(var n=0,r=e.length;r>n;n++)if(!u(e[n],t[n]))return!1;return!0}if(p.isDate(e))return p.isDate(t)?e-t==0:!1;if(p.isObject(e)){if(!p.isObject(t))return!1;var a=Object.keys(e),i=Object.keys(t);if(a.length!==i.length)return!1;for(var n=0,r=a.length;r>n;n++)if(!t.hasOwnProperty(n)||!u(e[n],t[n]))return!1;return!0}}function s(e,t){var n="";return e.forEach(function(e){n+=Array.isArray(e)?s(e):e instanceof h["default"]?t?f(e.toString(),t):e.toString():f(l(e),t)}),n}function c(e){var t="";return e.forEach(function(e){t+=Array.isArray(e)?c(e):e.toString()}),t}function l(e){return null===e||void 0===e?"":e.toString()}function f(e,t){return t?e.replace(/"/g,"&quot;"):e.replace(/</g,"&lt;")}Object.defineProperty(t,"__esModule",{value:!0});var d=n(3),h=r(d),_={}.toString,p={clone:function(e){return a(e)},isObject:i("Object"),isString:i("String"),isFunction:i("Function"),isNumber:i("Number"),isBoolean:i("Boolean"),isDate:i("Date"),equal:function(e,t){return u(e,t)},stringify:l,encodeHtml:f,joinArray:function(e,t){return s(e,t)},joinSourceArray:function(e){return c(e)}};t["default"]=p},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(e){return p["default"].isString(e)?document.querySelector(e):e instanceof y?e.element:e}function s(e){var t={};return e.forEach(function(e){Array.isArray(e)?t[e[0]]=e[1]:Object.keys(e).forEach(function(n){t[n]=e[n]})}),t}function c(e){var t=[];return Object.keys(e).forEach(function(n){t.push([n,e[n]])}),t}function l(e){for(var t=0,n=e.length;n>t;t++){var r=e[t];if(!Array.isArray(r)){var a=[];Object.keys(r).forEach(function(e){a.push([e,r[e]])}),e.splice.apply(e,[t,1].concat(a))}}return e}Object.defineProperty(t,"__esModule",{value:!0});var f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),d=n(1),h=r(d),_=n(2),p=r(_),v=0,y=function(e){function t(e,n,r){a(this,t);var o=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return o.__reset(e,n,r),o}return o(t,e),f(t,[{key:"__reset",value:function(e,t,n){this.uid=v++,this.__name=e,Array.isArray(t)?(this.props=s(t),this.__props=l(t)):(this.props=t,this.__props=c(t)),this.children=n,this.__element=null,this.__parent=null,this.__top=null,this.__style=null,this.__dom=!1,this.__cache={},this.once(h["default"].DOM,this.__onDom)}},{key:"clean",value:function(){if(this.__dom){this.__dom=!1,this.once(h["default"].DOM,this.__onDom);var e=this.element;e&&e.parentNode.removeChild(e)}}},{key:"__onDom",value:function(){this.__dom=!0,this.__saveRef()}},{key:"__saveRef",value:function(){if(this.__cache.ref){var e=this.top;if(e){var t=this.__cache.ref,n=e.ref[t];Array.isArray(n)?n.push(this):n?e.ref[t]=[n,this]:e.ref[t]=this}}}},{key:"inTo",value:function(e){this.clean();var t=this.toString();u(e).innerHTML=t,this.emit(h["default"].DOM)}},{key:"appendTo",value:function(e){this.clean();var t=this.toString();e=u(e),e.insertAdjacentHTML("beforeend",t),this.emit(h["default"].DOM)}},{key:"prependTo",value:function(e){this.clean();var t=this.toString();e=u(e),e.insertAdjacentHTML("afterbegin",t),this.emit(h["default"].DOM)}},{key:"before",value:function(e){this.clean();var t=this.toString();e=u(e),e.insertAdjacentHTML("beforebegin",t),this.emit(h["default"].DOM)}},{key:"after",value:function(e){this.clean();var t=this.toString();e=u(e),e.insertAdjacentHTML("afterend",t),this.emit(h["default"].DOM)}},{key:"replace",value:function(e){this.clean();var t=this.toString();e=u(e),e.insertAdjacentHTML("afterend",t),e.parentNode.removeChild(e),this.emit(h["default"].DOM)}},{key:"top",get:function(){return!this.__top&&this.parent&&(this.parent instanceof migi.Component?this.__top=this.parent:this.__top=this.parent.top),this.__top}},{key:"parent",get:function(){return this.__parent}},{key:"name",get:function(){return this.__name}},{key:"dom",get:function(){return this.__dom}}],[{key:"resetUid",value:function(){v=0}}]),t}(h["default"]);t["default"]=y},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function D(e,t,n){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,t);if(void 0===r){var a=Object.getPrototypeOf(e);return null===a?void 0:D(a,t,n)}if("value"in r)return r.value;var i=r.get;return void 0===i?void 0:i.call(n)},c=n(1),l=r(c),f=n(3),d=r(f),h=n(6),_=r(h),p=n(2),v=r(p),y=n(8),m=r(y),g=n(9),b=r(g),k=n(18),w=r(k),O=n(17),E=r(O),A=n(25),T=r(A),P=["click","dblclick","focus","blur","change","contextmenu","mousedown","mousemove","mouseover","mouseup","mouseout","mousewheel","resize","scroll","select","submit","DOMActivate","DOMFocusIn","DOMFocusOut","keydown","keypress","keyup","drag","dragstart","dragover","dragenter","dragleave","dragend","drop","formchange","forminput","input","cut","paste","reset","touchstart","touchmove","touchend","touchcancel","MSGestureEnd","MSPointerDown","pointerdown","MSPointerMove","pointermove","MSPointerUp","pointerup","MSPointerCancel","pointercancel"],M=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];a(this,t);var r=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,null,e,n)),o=r;return o.__name=o.constructor.__migiName,o.__virtualDom=null,o.__ref={},o.__stop=null,o.__model=null,o.__allowPropagation=!0,o.__bridgeHash={},o.__stream=null,o.__canData=!1,o.__bindHash={},o.__ob=[],o.__props.forEach(function(e){var t=e[0],n=e[1];o.__init(t,n)}),o.on(l["default"].DATA,o.__onData),r}return o(t,e),u(t,[{key:"__init",value:function(e,t){var n=this;if(/^on[a-zA-Z]/.test(e)){var r=e.slice(2).toLowerCase();n.once(l["default"].DOM,function(){n.virtualDom.__addEvt(r,t)})}else if(/^on-[a-zA-Z\d_]/.test(e)&&v["default"].isFunction(t)){var r=e.slice(3);this.on(r,function(){t.apply(void 0,arguments)})}else"model"==e&&(n.model=t)}},{key:"render",value:function(){return new _["default"]("div",this.props,this.children)}},{key:"toString",value:function(){if(this.__virtualDom=this.render(),!this.__virtualDom)throw new Error("render must return a VirtualDom: "+this.name);return this.__virtualDom.__parent=this,this.__style&&(this.__virtualDom.style=this.__style),this.__virtualDom.toString()}},{key:"findChild",value:function(e){return this.findChildren(e,!0)[0]}},{key:"findChildren",value:function(e,n){for(var r=[],a=0,i=this.children.length;i>a;a++){var o=this.children[a];if(o instanceof d["default"])if(o instanceof t){if((o.name==e||v["default"].isFunction(e)&&o instanceof e)&&(r.push(o),n))break}else{if((o.name==e||v["default"].isFunction(e)&&o instanceof e)&&(r.push(o),n))break;if(r=r.concat(o.findAll(e)),n&&r.length)break}}return r}},{key:"find",value:function(e){return this.__virtualDom?this.__virtualDom.find(e):null}},{key:"findAll",value:function(e){return this.__virtualDom?this.__virtualDom.findAll(e):[]}},{key:"bridge",value:function(e,n,r,a){var i=this;if(e==this)throw new Error("can not bridge self: "+i.name);if(!(e&&(e instanceof m["default"]||e instanceof t||e instanceof b["default"])))throw new Error("can only bridge to EventBus/Component/Model: "+i.name);2==arguments.length?v["default"].isString(n)?i.__record(e,n,n):Object.keys(n).forEach(function(t){var r=n[t];v["default"].isString(r)?i.__record(e,t,r):v["default"].isFunction(r)?i.__record(e,t,t,r):r.name&&i.__record(e,t,r.name,r.middleware)}):3==arguments.length?v["default"].isString(r)?i.__record(e,n,r):(a=r,i.__record(e,n,n,a)):4==arguments.length&&i.__record(e,n,r,a)}},{key:"__onDom",value:function(e){function n(e){e=e||window.event,e.target!=a&&e.srcElement!=a&&(e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation())}s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"__onDom",this).call(this);var r=this;r.virtualDom.emit(l["default"].DOM,e);var a=r.element;r.name&&a.setAttribute("migi-name",r.name),e||r.children==r.virtualDom.children||t.fakeDom(r.children),"true"!=r.props.allowPropagation&&("false"!=r.props.allowPropagation&&r.allowPropagation||(r.__stop=n,P.forEach(function(e){a.addEventListener(e,n)}),E["default"].attach(a)))}},{key:"__data",value:function(e){var t=this;t.dom&&(t.__canData=!0),t.emit(l["default"].DATA,e),Array.isArray(e)||(e=[e]),e.forEach(function(e){var n=t.__bridgeHash[e];if(n){var r=t.__stream||new w["default"](t.uid),a=t[e];n.forEach(function(e){var n=e.target,i=e.name,o=e.middleware;r.has(n.uid)||(r.add(n.uid),n instanceof m["default"]?n.emit(l["default"].DATA,i,o?o.call(t,a):a,r):(n.__stream=r,n[i]=o?o.call(t,a):a,n.__stream=null))})}})}},{key:"__onData",value:function(e){this.dom&&this.canData&&(this.virtualDom&&this.virtualDom.__onData(e),this.children.forEach(function(t){t instanceof _["default"]&&t.__onData(e)}))}},{key:"__destroy",value:function(){var e=this;if(e.__stop){var t=e.element;P.forEach(function(n){t.removeEventListener(n,e.__stop)})}e.model&&e.model.__del(e),e.__ob.forEach(function(t){var n=t.__ob__.indexOf(e);n>-1&&(t.__ob__.splice(n,1),t.__cb__.splice(n,1))});var n=e.virtualDom.__destroy();return e.emit(l["default"].DESTROY),e.__hash={},n}},{key:"__initBind",value:function(e){return this.__bindHash.hasOwnProperty(e)?!1:(this.__bindHash[e]=!0,!0)}},{key:"__getBind",value:function(e){return this[e+"__"]}},{key:"__setBind",value:function(e,t){this.__bindHash[e]=!0,this[e+"__"]=t,this.__array(e,t)}},{key:"__array",value:function(e,t){var n=this;Array.isArray(t)&&(t.__proto__=T["default"],t.__ob__=t.__ob__||[],t.__cb__=t.__cb__||[],-1==t.__ob__.indexOf(n)&&(n.__ob.push(t),t.__ob__.push(n),t.__cb__.push(function(){n[e]=n[e]})))}},{key:"allowPropagation",get:function(){return this.__allowPropagation},set:function(e){this.__allowPropagation=e}},{key:"element",get:function(){return this.virtualDom?this.virtualDom.element:null}},{key:"style",get:function(){return this.__style},set:function(e){this.__style=e}},{key:"model",get:function(){return this.__model},set:function(e){if(!(e instanceof b["default"]))throw new Error("can not set model to a non Model: "+e);this.__model=e,e.__add(this)}},{key:"virtualDom",get:function(){return this.__virtualDom}},{key:"ref",get:function(){return this.__ref}},{key:"canData",get:function(){return this.__canData}}],[{key:"fakeDom",value:function(e){Array.isArray(e)?e.forEach(function(e){t.fakeDom(e)}):e instanceof t?e.emit(l["default"].DOM,!0):e instanceof _["default"]&&e.emit(l["default"].DOM,!0)}}]),t}(d["default"]);["__record","__unRecord","bridgeTo","unBridge","unBridgeTo"].forEach(function(e){M.prototype[e]=m["default"].prototype[e]}),t["default"]=M},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={};t["default"]={get:function(e){return n[e]},set:function(e){return n[e.uid]=e,e}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(e){return e instanceof A["default"]?e.name+'[migi-uid="'+e.uid+'"]':e.replace(/(^|\s|,|])([A-Z][\w$]*)\b/,'$1[migi-name="$2"]')}function s(e,t){return c(e,t,!0)[0]||null}function c(e,t,n){return l(e,t,[],n)}function l(e,t,n,r){for(var a=0,i=t.length;i>a;a++){var o=t[a];if(o instanceof A["default"]?n=f(e,o,n,r):o instanceof S["default"]?(o=o.v,Array.isArray(o)?n=l(e,o,n,r):o instanceof A["default"]&&(n=f(e,o,n,r))):Array.isArray(o)&&(n=l(e,o,n,r)),r&&n.length)break}return n}function f(e,t,n,r){if(t instanceof P["default"])t instanceof e&&n.push(t);else{if(t instanceof e&&(n.push(t),r))return n;n=n.concat(t.findAll(e,r))}return n}function d(e){return void 0===e||null===e||!e.toString()}function h(e){if(e instanceof A["default"]||e instanceof S["default"])return e.toString();if(Array.isArray(e)){var t="";return e.forEach(function(e){t+=h(e)}),t}return D["default"].encodeHtml(D["default"].stringify(e))}function _(e,t){Array.isArray(e)?e.forEach(function(e){_(e,t)}):e instanceof A["default"]?e.__parent=t:e instanceof S["default"]&&_(e.v,t)}function p(e,t){Array.isArray(e)?e.forEach(function(e){p(e,t)}):e instanceof ae?e.style=t:e instanceof S["default"]&&p(e.v,t)}function v(e){var t=!0;if(Array.isArray(e))for(var n=0,r=e.length;r>n&&(t=v(e[n]),t);n++);else t=e instanceof A["default"]?!1:e instanceof S["default"]?v(e.v):d(e);return t}function y(e,t,n,r){if(Array.isArray(e))for(var a=0,i=e.length;i>a&&(y(e[a],t,n,r),!n.done);a++);else if(e instanceof A["default"]){if(t==e)return void(n.done=!0);r(e)}else e instanceof S["default"]&&y(e.v,t,n,r)}function m(e,t,n,r){if(Array.isArray(e))for(var a=0,i=e.length;i>a&&(m(e[a],t,n,r),!n.done);a++);else e instanceof A["default"]?t==e?n.start=!0:n.start&&r(e):e instanceof S["default"]&&m(e.v,t,n,r)}function g(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(Array.isArray(e))for(var n=0,r=e.length;r>n;n++)g(e[n],t);else e instanceof A["default"]?t.push(e):e instanceof S["default"]&&g(e.v,t);return t}Object.defineProperty(t,"__esModule",{value:!0});var b=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),k=function ie(e,t,n){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,t);if(void 0===r){var a=Object.getPrototypeOf(e);return null===a?void 0:ie(a,t,n)}if("value"in r)return r.value;var i=r.get;return void 0===i?void 0:i.call(n)},w=n(1),O=r(w),E=n(3),A=r(E),T=n(4),P=r(T),M=n(2),D=r(M),x=n(10),S=r(x),C=n(7),j=r(C),L=n(23),N=r(L),H=n(29),R=r(H),F=n(27),B=r(F),X=n(14),I=r(X),V=n(21),q=r(V),Y=n(26),z=r(Y),U=n(5),W=r(U),$=n(31),Z=r($),G=n(20),J=r(G),K=n(12),Q=r(K),ee=n(28),te=r(ee),ne={img:!0,meta:!0,link:!0,br:!0,basefont:!0,base:!0,col:!0,embed:!0,frame:!0,hr:!0,input:!0,keygen:!0,area:!0,param:!0,source:!0,track:!0,wbr:!0},re={swipe:!0,swipeleft:!0,swiperight:!0,swipeup:!0,swipedown:!0,longtap:!0,doubletap:!0},ae=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(a(this,t),ne.hasOwnProperty(e)&&r.length)throw new Error("self-close tag can not has chilren: "+e);var o=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,r)),u=o;return u.__names=null,u.__classes=null,u.__ids=null,u.__inline=null,u.__hover=!1,u.__active=!1,u.__listener=null,u.__init(e,r),o}return o(t,e),b(t,[{key:"toString",value:function(){var e=this,t="<"+e.name;if(e.__props.forEach(function(n){var r=e.__renderProp(n[0],n[1]);t+=r}),e.__style){var n=e.__match(!0);n&&(t=t.indexOf(' style="')>1?t.replace(/ style="[^"]*"/,' style="'+n+'"'):t+' style="'+n+'"')}return t+=' migi-uid="'+e.uid+'"',e.__checkListener(),e.__selfClose?t+"/>":(t+=">",t+=e.__renderChildren(),t+="</"+e.name+">")}},{key:"isFirst",value:function(e){if(this.parent instanceof P["default"])return!0;e=e||this.parent.children;for(var n=0,r=e.length;r>n;n++){var a=e[n];if(Array.isArray(a)&&a.length)return this.isFirst(a);if(a==this)return!0;if(a instanceof t)return!1;if(a instanceof S["default"]&&(a=a.v,Array.isArray(a)&&a.length))return this.isFirst(a)}}},{key:"isLast",value:function(e){if(this.parent instanceof P["default"])return!0;e=e||this.parent.children;for(var n=e.length-1;n>=0;n--){var r=e[n];if(Array.isArray(r)&&r.length)return this.isLast(r);if(r==this)return!0;if(r instanceof t)return!1;if(r instanceof S["default"]&&(r=r.v,Array.isArray(r)&&r.length))return this.isLast(r)}}},{key:"isEmpty",value:function(){return v(this.children)}},{key:"isEnabled",value:function(){return!this.__cache.disabled}},{key:"isDisabled",value:function(){return this.__cache.disabled}},{key:"isChecked",value:function(){return this.__cache.checked}},{key:"prev",value:function(){var e={};return y(this.parent.children,this,e,function(t){e.prev=t}),e.prev}},{key:"prevAll",value:function(e){var t={prev:[]};return y(this.parent.children,this,t,function(n){(e&&!Q["default"].nci(e,n)||!e)&&t.prev.push(n)}),t.prev}},{key:"next",value:function(){var e={};return m(this.parent.children,this,e,function(t){e.next=t,e.done=!0}),e.next}},{key:"nextAll",value:function(e){var t={next:[]};return m(this.parent.children,this,t,function(n){(e&&!Q["default"].nci(e,n)||!e)&&t.next.push(n)}),t.next}},{key:"isOnly",value:function(){return 1==this.siblings().length}},{key:"isOnlyOfType",value:function(e){for(var t=this,n=t.siblings(),r=0,a=n.length;a>r;r++){var i=n[r];if(i!=t&&!Q["default"].nci(e,i))return!1}return!0}},{key:"isFirstOfType",value:function(e){for(var t=this.prevAll(e),n=0,r=t.length;r>n;n++)if(!Q["default"].nci(e,t[n]))return!1;return!0}},{key:"isLastOfType",value:function(e){for(var t=this.nextAll(e),n=0,r=t.length;r>n;n++)if(!Q["default"].nci(e,t[n]))return!1;return!0}},{key:"siblings",value:function(){var e=this.parent,t=g(e.children);return t}},{key:"getIdx",value:function(e){var t=this.siblings(),n=t.indexOf(this);return n>-1?e?t.length-n-1:n:-1}},{key:"getIdxOfType",value:function(e,t){var n=t?this.nextAll(e):this.prevAll(e);t?n.unshift(this):n.push(this);var r=n.indexOf(this);return r>-1?t?n.length-r-1:r:-1}},{key:"__renderProp",value:function(e,t){var n=this,r="";if(/^on[a-zA-Z]/.test(e))n.once(O["default"].DOM,function(r){if(!r){var a=e.slice(2).toLowerCase();n.__addEvt(a,t)}});else if(t instanceof S["default"]){if("dangerouslySetInnerHTML"==e)return n.once(O["default"].DOM,function(){n.element.innerHTML=t.toSourceString()}),"";var a=t.toString(!0);"className"==e?e="class":"htmlFor"==e&&(e="for"),n.__cache[e]=a;var i=z["default"].special(n.name,e);switch(i){case z["default"].RENDER_EXIST:t.v&&(r=" "+e+'="'+a+'"');break;case z["default"].RENDER_DOM:n.once(O["default"].DOM,function(){n.__updateAttr(e,t)});break;default:r=" "+e+'="'+a+'"'}}else{var a=Array.isArray(t)?D["default"].joinSourceArray(t):D["default"].stringify(t);if("dangerouslySetInnerHTML"==e)return n.once(O["default"].DOM,function(){n.element.innerHTML=a}),"";"className"==e?e="class":"htmlFor"==e&&(e="for"),n.__cache[e]=a;var i=z["default"].special(n.name,e);switch(i){case z["default"].RENDER_EXIST:t&&(r=" "+e+'="'+D["default"].encodeHtml(a,!0)+'"');break;case z["default"].RENDER_DOM:n.once(O["default"].DOM,function(){n.__updateAttr(e,t)});break;default:r=" "+e+'="'+D["default"].encodeHtml(a,!0)+'"'}}if(n.__style)switch(e){case"class":case"id":r=" migi-"+r.slice(1)}return r}},{key:"__renderChildren",value:function(){var e=this,t="";return e.children.forEach(function(e){t+=h(e)}),t}},{key:"__checkListener",value:function(){var e=this;if("input"==e.name){if(e.props.hasOwnProperty("value")){var t=e.props.value;t instanceof S["default"]&&e.once(O["default"].DOM,function(){function n(e){q["default"](e);var n=e.target.value;t.setV(n);var r=t.k;0==r.indexOf("model.")?t.context.model[r.slice(6)]=n:t.context[r]=n}var r=e.__cache.type||"";switch(r.toLowerCase()){case"checkbox":case"radio":case"range":case"color":e.__addListener("change",n);break;default:e.__addListener(["input","paste","cut","change"],n)}})}}else if("select"==e.name){if(e.props.hasOwnProperty("value")){var t=e.props.value;t instanceof S["default"]&&e.once(O["default"].DOM,function(){function n(e){q["default"](e);var n=e.target.value;t.setV(n);var r=t.k;0==r.indexOf("model.")?t.context.model[r.slice(6)]=n:t.context[r]=n}e.__addListener("change",n)})}}else if("textarea"==e.name&&1==e.children.length){var n=e.children[0];n instanceof S["default"]&&e.once(O["default"].DOM,function(){function t(e){q["default"](e);var t=e.target.value;n.setV(t);var r=n.k;n.context[r]=t}e.__addListener(["input","paste","cut","change"],t)})}}},{key:"__addEvt",value:function(e,t){var n=this;n.__addListener(e,function(e){q["default"](e);var r=e.target,a=r.getAttribute("migi-uid"),i=W["default"].get(a);t instanceof j["default"]&&D["default"].isFunction(t.cb)?t.cb.call(t.context,e,n,i):D["default"].isFunction(t)?t(e,n,i):Array.isArray(t)&&t.forEach(function(t){var r=t[1],a=J["default"](e,t[0],n);a[0]&&(r instanceof j["default"]?r.cb.call(r.context,e,n,a[1],i):D["default"].isFunction(r)&&r(e,n,a[1],i))})})}},{key:"__addListener",value:function(e,t){var n=this;if(Array.isArray(e))e.forEach(function(e){n.__addListener(e,t)});else{n.__listener=n.__listener||[],"tap"==e&&(e="click");var r=n.element;if(re.hasOwnProperty(e))return void Z["default"](this,e,t,n.__listener);if(n.__listener.push([e,t]),r.addEventListener(te["default"][e]||e,t),"load"==e&&r.complete){var a=document.createEvent("Event");a.initEvent("load",!0,!0),r.dispatchEvent(a)}}}},{key:"__removeListener",value:function(){var e=this;if(e.__listener){var t=e.element;e.__listener.forEach(function(e){t.removeEventListener(e[0],e[1])})}}},{key:"find",value:function(e){if(D["default"].isFunction(e))return s(e,this.children);if(this.element){var t=this.element.querySelector(u(e)),n=t.getAttribute("migi-uid");return W["default"].get(n)||null}return null}},{key:"findAll",value:function(e){if(D["default"].isFunction(e))return c(e,this.children);var t=[];if(this.element){var n=this.element.querySelectorAll(u(e));Array.from(n).forEach(function(e){if(e){var n=e.getAttribute("migi-uid"),r=W["default"].get(n)||null;r&&t.push(r)}})}return t}},{key:"__onDom",value:function(e){k(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"__onDom",this).call(this);var n=this;if(e)return void P["default"].fakeDom(n.children);var r={start:0,first:!0};n.__chenckBlank(n.children,r),(r.empty||r.first)&&n.__insertBlank(r.start)}},{key:"__chenckBlank",value:function(e,t){var n=this;if(Array.isArray(e)&&e.length)e.forEach(function(e){n.__chenckBlank(e,t)});else if(e instanceof A["default"]&&!(e instanceof migi.NonVisualComponent))t.empty&&n.__insertBlank(t.start),t.start++,t.prev==I["default"].TEXT&&t.start++,t.prev=I["default"].DOM,t.empty=!1,t.first=!1,e.emit(O["default"].DOM);else if(e instanceof S["default"])n.__chenckBlank(e.v,t);else if(d(e)){if(e instanceof migi.NonVisualComponent&&e.emit(O["default"].DOM),t.prev==I["default"].TEXT)return;t.empty=!0,t.prev=I["default"].TEXT,t.first=!1}else t.empty=!1,t.prev=I["default"].TEXT,t.first=!1}},{key:"__insertBlank",value:function(e){var t=document.createTextNode(""),n=this.element,r=n.childNodes,a=r.length;!a||e>=a?n.appendChild(t):n.insertBefore(t,r[e])}},{key:"__onData",value:function(e){var t=this;if(t.dom){t.__props.forEach(function(n){var r=n[0];if(n=n[1],n instanceof S["default"]){var a=!1,i=Array.isArray(e)?1:0,o=Array.isArray(n.k)?2:0;switch(i+o){case 0:a=e==n.k;break;case 1:a=e.indexOf(n.k)>-1;break;case 2:a=n.k.indexOf(e)>-1;break;case 3:var u={};e.forEach(function(e){u[e]=!0});for(var s=n.k,c=0,l=s.length;l>c;c++)if(u.hasOwnProperty(s[c])){a=!0;break}}if(a){var f=n.v;n.update(f)&&t.__updateAttr(r,n.v)}}});for(var n,r=[],a={start:0,record:[],first:!0},i=t.children,o=0,u=i.length;u>o;o++){var s=i[o];n=[o],t.__checkObj(e,s,r,a,n)}if(r.length){if("textarea"==t.name)return void t.__updateAttr("value",N["default"].value(r[0],t.children));r.forEach(function(e){N["default"].update(e,t.children,t.element)})}}}},{key:"__checkObj",value:function(e,n,r,a,i){var o=this;if(n instanceof S["default"]){var u=!1,s=Array.isArray(e)?1:0,c=Array.isArray(n.k)?2:0;switch(s+c){case 0:u=e==n.k;break;case 1:u=e.indexOf(n.k)>-1;break;case 2:u=n.k.indexOf(e)>-1;break;case 3:var l={};e.forEach(function(e){l[e]=!0});for(var f=n.k,d=0,h=f.length;h>d;d++)if(l.hasOwnProperty(f[d])){u=!0;break}}if(u){var _=n.v;n.update(_)?B["default"].diff(this.element,_,n.v,r,a,i,this):o.__checkObj(e,n.v,r,a,i)}else o.__checkObj(e,n.v,r,a,i)}else n instanceof A["default"]?(delete a.t2d,delete a.d2t,n instanceof t&&n.__onData(e),a.start++,a.first||a.prev!=I["default"].TEXT||a.start++,a.prev=I["default"].DOM):Array.isArray(n)&&n.length?(i.push(0),n.forEach(function(t,n){i[i.length-1]=n,o.__checkObj(e,t,r,a,i)}),i.pop()):(B["default"].check(a,this.element,n,r,i),N["default"].record(i,a),a.prev=I["default"].TEXT);a.first=!1}},{key:"__updateAttr",value:function(e,t){return"dangerouslySetInnerHTML"==e?((null===t||void 0===t)&&(t=""),this.element.innerHTML=D["default"].stringify(t),void this.__insertBlank(0)):(z["default"].update(this.name,this.element,e,t,this.__style),this.__cache[e]=t,void(this.__style&&this.__updateStyle()))}},{key:"__match",value:function(e){this.__inline=this.__cache.style||"",this.__initCI();var t=R["default"](this.__names,this.__classes,this.__ids,this.__style||{"default":{}},this,e);return t+this.__inline}},{key:"__initCI",value:function(){var e=this.parent;e instanceof t?(this.__classes=e.__classes.slice(),this.__ids=e.__ids.slice()):(this.__classes=[],this.__ids=[]),this.__classes.push(Q["default"].splitClass(this.__cache["class"])),this.__ids.push(Q["default"].preId(this.__cache.id))}},{key:"__updateStyle",value:function(e){var n=this.__match(e);this.element.getAttribute("style")!=n&&this.element.setAttribute("style",n),e||this.children.forEach(function(e){e instanceof t&&e.__updateStyle()})}},{key:"__init",value:function(e,t){var n=this;n.__selfClose=ne.hasOwnProperty(e),_(t,n)}},{key:"__reset",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return k(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"__reset",this).call(this,e,n,r),this.__init(e,r),this.__hasDes=!1,this}},{key:"__destroy",value:function(){return(this.__onHover||this.__outHover)&&this.element&&(this.element.removeEventListener("mouseenter",this.__onHover),this.element.removeEventListener("mouseleave",this.__outHover)),this.__hash={},this.__cache={},this.__names=null,this.__classes=null,this.__ids=null,this.__inline=null,this.__hover=!1,this.__active=!1,this.__listener=null,this.__parent=null,this.__top=null,this.__dom=!1,this.__style=null,this.__element=null,this}},{key:"names",get:function(){return this.__names||(this.__names=[])}},{key:"element",get:function(){return this.__element||(this.__element=document.querySelector(this.name+'[migi-uid="'+this.uid+'"]'))}},{key:"style",get:function(){return this.__style},set:function(e){var n=this;n.__style=e,n.parent instanceof t?n.__names=n.parent.names.slice():n.__names=[],n.__names.push(n.name),n.children.forEach(function(t){p(t,e)})}}]),t}(A["default"]);t["default"]=ae},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function a(e,t){n(this,a),this.context=e,this.cb=t};t["default"]=r},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,
"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(1),c=r(s),l=n(2),f=r(l),d=0,h=function(e){function t(){a(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.uid="e"+d++,e.__bridgeHash={},e.on(c["default"].DATA,e.__brcb),e}return o(t,e),u(t,[{key:"__brcb",value:function(e,t,n){if(this.__bridgeHash.hasOwnProperty(e))for(var r=this.__bridgeHash[e],a=0,i=r.length;i>a;a++){var o=r[a],u=o.target,s=o.name,c=o.middleware;if(!n.has(u.uid)){n.add(u.uid);var l=migi.CacheComponent.getSid(u);n.sid>l&&(u.__stream=n,u[s]=c?c.call(u,t):t,u.__stream=null)}}}},{key:"__record",value:function(e,t,n,r){var a=this,i=this.__bridgeHash[t]=this.__bridgeHash[t]||[];i.forEach(function(r){if(r.target==e&&r.name==n)throw new Error("duplicate bridge: "+a+"."+t+" -> "+e+"."+n)}),i.push({target:e,name:n,middleware:r})}},{key:"__unRecord",value:function(e,t,n){for(var r=this,a=r.__bridgeHash[t]||[],i=0,o=a.length;o>i;i++){var u=a[i];if(u.target==e&&u.name==n)return void a.splice(i,1)}}},{key:"bridge",value:function(e,t,n,r){var a=this;if(e==this)throw new Error("can not bridge self: "+a);if(!(e&&(e instanceof migi.Component||e instanceof migi.Model)))throw new Error("can only bridge to Component/Model: "+a);2==arguments.length?f["default"].isString(t)?a.__record(e,t,t):Object.keys(t).forEach(function(n){var r=t[n];f["default"].isString(r)?a.__record(e,n,r):r.name&&a.__record(e,n,r.name,r.middleware)}):3==arguments.length?f["default"].isString(n)?a.__record(e,t,n):(r=n,a.__record(e,t,t,r)):4==arguments.length&&a.__record(e,t,n,r)}},{key:"bridgeTo",value:function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;t>r;r++)n[r-1]=arguments[r];e.bridge.apply(e,[this].concat(n))}},{key:"unBridge",value:function(e,t,n){var r=this;2==arguments.length?f["default"].isString(t)?r.__unRecord(e,t,t):Object.keys(t).forEach(function(n){var a=t[n];f["default"].isString(a)?r.__unRecord(e,n,a):f["default"].isFunction(a)?r.__unRecord(e,n,n):a.name&&r.__unRecord(e,n,a.name)}):r.__unRecord(e,t,n)}},{key:"unBridgeTo",value:function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;t>r;r++)n[r-1]=arguments[r];e.unBridge.apply(e,[this].concat(n))}}]),t}(c["default"]);t["default"]=h},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(1),c=r(s),l=n(4),f=r(l),d=0,h=function(e){function t(){a(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.uid="m"+d++,e.__name=e.constructor.__migiName,e.__ref=[],e.__bridgeHash={},e.__bindHash={},e.__ob=[],e.on(c["default"].DATA,e.__onData),e}return o(t,e),u(t,[{key:"__onData",value:function(e,t){e="model."+e,this.__ref.forEach(function(n){n.dom&&(n.__canData=!0),n.emit(c["default"].DATA,e,t)})}},{key:"__add",value:function(e){-1==this.__ref.indexOf(e)&&this.__ref.push(e)}},{key:"__del",value:function(e){var t=this.__ref.indexOf(e);t>-1&&this.__ref.splice(t,1)}},{key:"name",get:function(){return this.__name}}]),t}(c["default"]);["__data","__record","bridge","bridgeTo","__unRecord","unBridge","unBridgeTo","__initBind","__getBind","__setBind","__array"].forEach(function(e){h.prototype[e]=f["default"].prototype[e]}),t["default"]=h},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(3),u=r(o),s=n(2),c=r(s),l=function(){function e(t,n,r){a(this,e),this.k=t,this.context=n,this.cb=r,this.setV(r.call(n))}return i(e,[{key:"setV",value:function(e){this.v=c["default"].clone(e)}},{key:"toString",value:function(e){if(Array.isArray(this.v))return c["default"].joinArray(this.v,e);var t=c["default"].stringify(this.v);return e?c["default"].encodeHtml(t,e):this.v instanceof u["default"]?t:c["default"].encodeHtml(t)}},{key:"toSourceString",value:function(){return Array.isArray(this.v)?c["default"].joinSourceArray(this.v):c["default"].stringify(this.v)}},{key:"update",value:function(e){var t=this.cb.call(this.context);return c["default"].equal(e,t)?void 0:(this.setV(t),!0)}}]),e}();t["default"]=l},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=document.createElement("div"),r=document.createElement("table"),a=document.createElement("tbody"),i=document.createElement("tr"),o=document.createElement("ul"),u=document.createElement("dl"),s=document.createElement("select"),c=document.createElement("menu");t["default"]={NODE:n,getParent:function(e){switch(e){case"td":return i;case"tr":return a;case"tbody":case"thead":case"col":return r;case"li":return o;case"dt":case"dd":return u;case"option":return s;case"menuitem":return c;default:return n}}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(t-r>1){a(e,t,n,r+1);for(var i=0,o=n.length;o>i;i++)n.push(n[i]+"."+e[r])}return n.push("."+e[r]),n}function i(e,t){if("odd"==t){if(e%2==1)return!1}else if("even"==t){if(e%2==0)return!1}else if(/^\d+$/.test(t)){if(e!=t-1)return!1}else{for(var n=/(\d+)?n(?:\+(\d+))?/.exec(t),r=!1,a=0;a<=Math.ceil(e/n[1]);a++)if((n[1]||1)*a+(n[2]||0)==e+1){r=!0;break}if(!r)return!1}return!0}Object.defineProperty(t,"__esModule",{value:!0});var o=n(13),u=r(o);t["default"]={splitClass:function(e){return e=(e||"").trim(),e?(e=e.split(/\s+/),u["default"](e,function(e,t){return e>t}),e):""},preId:function(e){return e=(e||"").trim(),e?"#"+e:""},combo:function s(e,t,n,r){var i=0,o=0;if(e&&e.length){var u=a(e,e.length);o=1}var s=[t];n&&(i=2);var c=r.hasOwnProperty("_*."),l=r.hasOwnProperty("_*#"),f=r.hasOwnProperty("_*.#");return r.hasOwnProperty("_*")&&s.push("*"),o&&u.forEach(function(e){s.push(e),s.push(t+e),c&&s.push("*"+e),i&&(s.push(e+n),s.push(t+e+n),f&&s.push("*"+e+n))}),i&&(s.push(n),s.push(t+n),l&&s.push("*"+n)),s},pseudo:function c(e,t,n){for(var r=0,a=e.length;a>r;r++){var c=e[r];switch(c){case"hover":if(!t.__hover)return!1;break;case"active":if(!t.__active)return!1;break;case"first-child":if(!t.isFirst())return!1;break;case"last-child":if(!t.isLast())return!1;break;case"empty":if(!t.isEmpty())return!1;break;case"enabled":if(!t.isEnabled())return!1;break;case"disabled":if(!t.isDisabled())return!1;break;case"checked":if(!t.isChecked())return!1;break;case"only-child":if(!t.isOnly())return!1;break;case"only-of-type":if(!t.isOnlyOfType(n))return!1;break;case"first-of-type":if(!t.isFirstOfType(n))return!1;break;case"last-of-type":if(!t.isLastOfType(n))return!1;break;default:if(0==c.indexOf("nth-child")){var o=t.getIdx(),u=/\((.+)\)/.exec(c)[1];if(!i(o,u))return!1}else if(0==c.indexOf("nth-last-child")){var o=t.getIdx(!0),u=/\((.+)\)/.exec(c)[1];if(!i(o,u))return!1}else if(0==c.indexOf("nth-of-type")){var o=t.getIdxOfType(n),u=/\((.+)\)/.exec(c)[1];if(!i(o,u))return!1}else{if(0!=c.indexOf("nth-last-of-type"))return!1;var o=t.getIdxOfType(n,!0),u=/\((.+)\)/.exec(c)[1];if(!i(o,u))return!1}}}return!0},attr:function l(e,t){var n=!0;e:for(var r=0,a=e.length;a>r;r++){var l=e[r];if(1==l.length){if(!t.__cache.hasOwnProperty(l[0])){n=!1;break}}else{var i=t.__cache[l[0]];if(void 0===i){n=!1;break}var o=l[2];switch(l[1]){case"=":n=i==o;break;case"^=":n=0==i.indexOf(o);break;case"$=":n=i.length>=o.length&&i.indexOf(o)==i.length-o.length;break;case"~=":var u=new RegExp("\\b"+o+"\\b");n=u.test(i);break;case"*=":n=i.indexOf(o)>-1;break;case"|=":n=0==i.indexOf(o)||0==i.indexOf(o+"-");break;default:n=!1;break e}if(!n)break}}return n},nci:function(e,t){var n=/^[a-z\d]+/i.exec(e);if(n&&n[0].toUpperCase()!=t.__name.toUpperCase())return!0;var r=e.match(/\.[a-z\d_-]+/gi);if(r)for(var a=r.length-1;a>=0;a--)if(!new RegExp("\\b"+r[a].slice(1)+"\\b","i").test(t.__cache["class"]))return!0;var i=/#[a-z\d_-]+/i.exec(e);return i&&i[0].toUpperCase()!=t.__cache.id.toUpperCase()?!0:void 0}}},function(e,t){"use strict";function n(e,t,a,i){if(!(t>=a)){for(var o=t,u=a,s=o,c=e[s],l=!0;u>o;)if(l){for(;u>o;u--)if(i&&i.call(e,c,e[u])||!i&&c>e[u]){r(e,s,u),s=u,l=!l;break}}else for(;u>o;o++)if(i&&i.call(e,e[o],c)||!i&&c<e[o]){r(e,s,o),s=o,l=!l;break}n(e,t,s,i),n(e,s+1,a,i)}}function r(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}e.exports=function(e,t){if(!Array.isArray(e))throw new Error("quick sort need an array");return e.length<2?e:(n(e,0,e.length-1,t),e)}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={TEXT:1,DOM:2}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(1),c=r(s),l=n(4),f=r(l),d=n(8),h=r(d),_=n(18),p=r(_),v=n(16),y=r(v),m=function(e){function t(){var e;a(this,t);for(var n=arguments.length,r=Array(n),o=0;n>o;o++)r[o]=arguments[o];var u=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(r)));return u.__handler={},u.__ccb=!1,u.__handler2={},u.__timeout,u.__timecb,u}return o(t,e),u(t,[{key:"__data",value:function(e){var n=this;n.dom&&(n.__canData=!0),Array.isArray(e)||(e=[e]),e.forEach(function(e){if(n.__handler.hasOwnProperty(e)){var t=n.__handler[e];if(n.__stream)t instanceof p["default"]?t.sid<n.__stream.sid&&(n.__handler[e]=n.__stream):t<n.__stream.sid&&(n.__handler[e]=n.__stream);else{var r=p["default"].now();t instanceof p["default"]?t.sid<=r&&(n.__handler[e]=r):r>t&&(n.__handler[e]=r)}}else n.__handler[e]=n.__stream||p["default"].gen()}),n.__ccb||(n.__ccb=!0,n.__timeout=setTimeout(n.__timecb=function(){n.__ccb=!1;var e=n.__handler,r=Object.keys(e);n.__handler={},r.forEach(function(t){var r=e[t];n.__handler2[t]=r.sid||r}),r.length&&(n.emit(c["default"].DATA,r.length>1?r:r[0]),r.forEach(function(r){var a=e[r];if(a instanceof p["default"]){var i=n.__bridgeHash[r];i&&i.forEach(function(e){var i=e.target,o=e.name,u=e.middleware;if(!a.has(i.uid)){a.add(i.uid);var s=t.getSid(i,o);a.sid>s&&(i.__stream=a,i[o]=u?u.call(n,n[r]):n[r],i.__stream=null)}})}else{var i=n.__bridgeHash[r];i&&(a=new p["default"](n.uid,e[r]),i.forEach(function(e){var i=e.target,o=e.name,u=e.middleware;if(a.add(i.uid),i instanceof h["default"])i.emit(c["default"].DATA,o,u?u.call(n,n[r]):n[r],a);else{var s=t.getSid(i,o);a.sid>s&&(i.__stream=a,i[o]=u?u.call(n,n[r]):n[r],i.__stream=null)}}))}}))},0))}},{key:"flush",value:function(){this.__timeout&&(clearTimeout(this.__timeout),this.__ccb=!1,this.__timecb())}}],[{key:"getSid",value:function(e,n){if(e instanceof t||e instanceof y["default"]){var r=e.__handler[n]||e.__handler2[n]||0;return r.sid||r}return 0}}]),t}(f["default"]);t["default"]=m},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=n(9),s=r(u),c=n(15),l=r(c),f=function(e){function t(){a(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.__handler={},e.__ccb=!1,e.__handler2={},e.__timeout,e.__timecb,e}return o(t,e),t}(s["default"]);f.prototype.__data=l["default"].prototype.__data,t["default"]=f},function(e,t){"use strict";function n(e,t){function r(e,t){return function(){return e.apply(t,arguments)}}var i;if(t=t||{},this.trackingClick=!1,this.trackingClickStart=0,this.targetElement=null,this.touchStartX=0,this.touchStartY=0,this.lastTouchIdentifier=0,this.touchBoundary=t.touchBoundary||10,this.layer=e,this.tapDelay=t.tapDelay||200,this.tapTimeout=t.tapTimeout||700,!n.notNeeded(e)){for(var o=["onMouse","onClick","onTouchStart","onTouchMove","onTouchEnd","onTouchCancel"],u=this,s=0,c=o.length;c>s;s++)u[o[s]]=r(u[o[s]],u);a&&(e.addEventListener("mouseover",this.onMouse,!0),e.addEventListener("mousedown",this.onMouse,!0),e.addEventListener("mouseup",this.onMouse,!0)),e.addEventListener("click",this.onClick,!0),e.addEventListener("touchstart",this.onTouchStart,!1),e.addEventListener("touchmove",this.onTouchMove,!1),e.addEventListener("touchend",this.onTouchEnd,!1),e.addEventListener("touchcancel",this.onTouchCancel,!1),Event.prototype.stopImmediatePropagation||(e.removeEventListener=function(t,n,r){var a=Node.prototype.removeEventListener;"click"===t?a.call(e,t,n.hijacked||n,r):a.call(e,t,n,r)},e.addEventListener=function(t,n,r){var a=Node.prototype.addEventListener;"click"===t?a.call(e,t,n.hijacked||(n.hijacked=function(e){e.propagationStopped||n(e)}),r):a.call(e,t,n,r)}),"function"==typeof e.onclick&&(i=e.onclick,e.addEventListener("click",function(e){i(e)},!1),e.onclick=null)}}Object.defineProperty(t,"__esModule",{value:!0});var r=navigator.userAgent.indexOf("Windows Phone")>=0,a=navigator.userAgent.indexOf("Android")>0&&!r,i=/iP(ad|hone|od)/.test(navigator.userAgent)&&!r,o=i&&/OS 4_\d(_\d)?/.test(navigator.userAgent),u=i&&/OS [6-7]_\d/.test(navigator.userAgent),s=navigator.userAgent.indexOf("BB10")>0;n.prototype.needsClick=function(e){switch(e.nodeName.toLowerCase()){case"button":case"select":case"textarea":if(e.disabled)return!0;break;case"input":if(i&&"file"===e.type||e.disabled)return!0;break;case"label":case"iframe":case"video":return!0}return/\bneedsclick\b/.test(e.className)||/\bneedsclick\b/.test(e.getAttribute("migi-class"))},n.prototype.needsFocus=function(e){switch(e.nodeName.toLowerCase()){case"textarea":return!0;case"select":return!a;case"input":switch(e.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return!1}return!e.disabled&&!e.readOnly;default:return/\bneedsfocus\b/.test(e.className)}},n.prototype.sendClick=function(e,t){var n,r;a&&document.activeElement&&document.activeElement!==e&&document.activeElement.blur(),r=t.changedTouches[0],n=document.createEvent("MouseEvents"),n.initMouseEvent(this.determineEventType(e),!0,!0,window,1,r.screenX,r.screenY,r.clientX,r.clientY,!1,!1,!1,!1,0,null),n.forwardedTouchEvent=!0,e.dispatchEvent(n)},n.prototype.determineEventType=function(e){return a&&"select"===e.tagName.toLowerCase()?"mousedown":"click"},n.prototype.focus=function(e){var t;i&&e.setSelectionRange&&0!==e.type.indexOf("date")&&"time"!==e.type&&"month"!==e.type&&"number"!==e.type&&"email"!==e.type&&"range"!==e.type?(t=e.value.length,e.setSelectionRange(t,t)):e.focus()},n.prototype.updateScrollParent=function(e){var t,n;if(t=e.fastClickScrollParent,!t||!t.contains(e)){n=e;do{if(n.scrollHeight>n.offsetHeight){t=n,e.fastClickScrollParent=n;break}n=n.parentElement}while(n)}t&&(t.fastClickLastScrollTop=t.scrollTop)},n.prototype.getTargetElementFromEventTarget=function(e){return e.nodeType===Node.TEXT_NODE?e.parentNode:e},n.prototype.onTouchStart=function(e){var t,n,r;if(e.targetTouches.length>1)return!0;if(t=this.getTargetElementFromEventTarget(e.target),n=e.targetTouches[0],i){if(r=window.getSelection(),r.rangeCount&&!r.isCollapsed)return!0;if(!o){if(n.identifier&&n.identifier===this.lastTouchIdentifier)return e.preventDefault(),!1;this.lastTouchIdentifier=n.identifier,this.updateScrollParent(t)}}return this.trackingClick=!0,this.trackingClickStart=e.timeStamp,this.targetElement=t,this.touchStartX=n.pageX,this.touchStartY=n.pageY,e.timeStamp-this.lastClickTime<this.tapDelay&&e.preventDefault(),!0},n.prototype.touchHasMoved=function(e){var t=e.changedTouches[0],n=this.touchBoundary;return Math.abs(t.pageX-this.touchStartX)>n||Math.abs(t.pageY-this.touchStartY)>n?!0:!1},n.prototype.onTouchMove=function(e){return this.trackingClick?((this.targetElement!==this.getTargetElementFromEventTarget(e.target)||this.touchHasMoved(e))&&(this.trackingClick=!1,this.targetElement=null),!0):!0},n.prototype.findControl=function(e){return void 0!==e.control?e.control:e.htmlFor?document.getElementById(e.htmlFor):e.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")},n.prototype.onTouchEnd=function(e){var t,n,r,s,c,l=this.targetElement;if(!this.trackingClick)return!0;if(e.timeStamp-this.lastClickTime<this.tapDelay)return this.cancelNextClick=!0,!0;if(e.timeStamp-this.trackingClickStart>this.tapTimeout)return!0;if(this.cancelNextClick=!1,this.lastClickTime=e.timeStamp,n=this.trackingClickStart,this.trackingClick=!1,this.trackingClickStart=0,u&&(c=e.changedTouches[0],l=document.elementFromPoint(c.pageX-window.pageXOffset,c.pageY-window.pageYOffset)||l,l.fastClickScrollParent=this.targetElement.fastClickScrollParent),r=l.tagName.toLowerCase(),"label"===r){if(t=this.findControl(l)){if(this.focus(l),a)return!1;l=t}}else if(this.needsFocus(l))return e.timeStamp-n>100||i&&window.top!==window&&"input"===r?(this.targetElement=null,!1):(this.focus(l),this.sendClick(l,e),i&&"select"===r||(this.targetElement=null,e.preventDefault()),!1);return i&&!o&&(s=l.fastClickScrollParent,s&&s.fastClickLastScrollTop!==s.scrollTop)?!0:(this.needsClick(l)||(e.preventDefault(),this.sendClick(l,e)),!1)},n.prototype.onTouchCancel=function(){this.trackingClick=!1,this.targetElement=null},n.prototype.onMouse=function(e){return this.targetElement?"canvas"==this.targetElement.nodeName.toLowerCase()?!0:e.forwardedTouchEvent?!0:e.cancelable&&(!this.needsClick(this.targetElement)||this.cancelNextClick)?(e.stopImmediatePropagation?e.stopImmediatePropagation():e.propagationStopped=!0,e.stopPropagation(),e.preventDefault(),!1):!0:!0},n.prototype.onClick=function(e){if(!this.targetElement&&!e.forwardedTouchEvent)return e.stopImmediatePropagation?e.stopImmediatePropagation():e.propagationStopped=!0,e.stopPropagation(),e.preventDefault(),!1;var t;return this.trackingClick?(this.targetElement=null,this.trackingClick=!1,!0):"submit"===e.target.type&&0===e.detail?!0:(t=this.onMouse(e),t||(this.targetElement=null),t)},n.prototype.destroy=function(){var e=this.layer;a&&(e.removeEventListener("mouseover",this.onMouse,!0),e.removeEventListener("mousedown",this.onMouse,!0),e.removeEventListener("mouseup",this.onMouse,!0)),e.removeEventListener("click",this.onClick,!0),e.removeEventListener("touchstart",this.onTouchStart,!1),e.removeEventListener("touchmove",this.onTouchMove,!1),e.removeEventListener("touchend",this.onTouchEnd,!1),e.removeEventListener("touchcancel",this.onTouchCancel,!1)},n.notNeeded=function(e){var t,n,r,i;if("undefined"==typeof window.ontouchstart)return!0;if(n=+(/Chrome\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1]){if(!a)return!0;if(t=document.querySelector("meta[name=viewport]")){if(-1!==t.content.indexOf("user-scalable=no"))return!0;if(n>31&&document.documentElement.scrollWidth<=window.outerWidth)return!0}}if(s&&(r=navigator.userAgent.match(/Version\/([0-9]*)\.([0-9]*)/),r[1]>=10&&r[2]>=3&&(t=document.querySelector("meta[name=viewport]")))){if(-1!==t.content.indexOf("user-scalable=no"))return!0;if(document.documentElement.scrollWidth<=window.outerWidth)return!0}return"none"===e.style.msTouchAction||"manipulation"===e.style.msTouchAction?!0:(i=+(/Firefox\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1],i>=27&&(t=document.querySelector("meta[name=viewport]"),t&&(-1!==t.content.indexOf("user-scalable=no")||document.documentElement.scrollWidth<=window.outerWidth))?!0:"none"===e.style.touchAction||"manipulation"===e.style.touchAction?!0:!1)},n.attach=function(e,t){return new n(e,t)},t["default"]=n},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=1,i=function(){function e(t,r){n(this,e),this.sid=void 0===r?a++:r,this.hash={},this.hash[t]=!0}return r(e,[{key:"add",value:function(e){this.hash[e]=!0}},{key:"has",value:function(e){return this.hash.hasOwnProperty(e)}}],[{key:"now",value:function(){return a}},{key:"gen",value:function(){return a++}}]),e}();t["default"]=i},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=4096,r=new Array(n),a={index:0,add:function(e){!e.__hasDes&&this.index<n&&(r[this.index++]=e,e.__hasDes=!0)},get:function(){return r[--this.index]}};t["default"]=a},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t,n){var r=e.target,a=c["default"].get(r.getAttribute("migi-uid")),s=[],l=[],f=[];i(a,s,l,f);for(var d=a;d.parent&&d.parent!=n;)d=d.parent,i(d,s,l,f);for(a!=n&&i(n,s,l,f),u=!1,o(s.length-1,s,l,f,t,a);!u&&s.length;)a=a.parent,s.pop(),l.pop(),f.pop(),o(s.length-1,s,l,f,t,a);return[u,a]}function i(e,t,n,r){t.unshift(e.name),n.unshift(f["default"].splitClass(e.__cache["class"])),r.unshift(f["default"].preId(e.__cache.id))}function o(e,t,n,r,a,i){if(!u)for(var s=f["default"].combo(n[e],t[e],r[e],a),c=0,l=s.length;l>c;c++){var d=s[c];if(a.hasOwnProperty(d)){var h=a[d];if(e){o(e-1,t,n,r,h,i.parent);for(var _=e-2;_>=0;_--)o(_,t,n,r,h,i.parent)}if(h.hasOwnProperty("_v"))return void(u=!0);if(h.hasOwnProperty("_:")||h.hasOwnProperty("_[")){var p,v=function(a){if(a&&a.hasOwnProperty("_[")){var s=a["_["];s.forEach(function(a){var c=f["default"].attr(a[0],i);c&&(s=a[1],e&&o(e-1,t,n,r,s,i.parent),s.hasOwnProperty("_v")&&(u=!0))})}};h.hasOwnProperty("_:")&&(p=h["_:"],p.forEach(function(a){var s=f["default"].pseudo(a[0],i,d);s&&(p=a[1],e&&o(e-1,t,n,r,p,i.parent),p.hasOwnProperty("_v")&&(u=!0))})),v(h),v(p)}if(h.hasOwnProperty("_>")){var p=h["_>"];o(e-1,t,n,r,p,i.parent)}if(h.hasOwnProperty("_+")){var p=h["_+"],y=i.prev();y&&Object.keys(p).forEach(function(a){return f["default"].nci(a,y)?void 0:p[a].hasOwnProperty("_v")?void(u=!0):void o(e-1,t,n,r,p[a],i.parent)})}if(h.hasOwnProperty("_~")){var p=h["_~"],m=i.prevAll();if(m.length)for(var g=!1,c=m.length-1;c>=0;c--){var y=m[c];if(Object.keys(p).forEach(function(a){if(!f["default"].nci(a,y)){if(p[a].hasOwnProperty("_v"))return void(u=!0);g=!0,o(e-1,t,n,r,p[a],i.parent)}}),g)break}}}}}Object.defineProperty(t,"__esModule",{value:!0});var u,s=n(5),c=r(s),l=n(12),f=r(l);t["default"]=a},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(e){3==e.target.nodeType&&(e.target=e.target.parentNode)}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={};t["default"]={add:function(e,t){n[e]=t},del:function(e){var t=n[e];t&&(window.removeEventListener("mouseup",t,!0),window.removeEventListener("touchend",t,!0),window.removeEventListener("touchcancel",t,!0),window.removeEventListener("blur",t),window.removeEventListener("dragend",t),delete n[e])}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t,n){for(var r="",o=e.shift(),u=t.length;u>o;o++){var s=t[o];if(e.length){if(r+=s instanceof h["default"]?a(e,s.v,n):a(e,s,n),n.end)break}else if(s instanceof h["default"])if(Array.isArray(s.v)){if(r+=i(s.v,n),n.end)break}else{if(s.v instanceof l["default"]){n.end=!0;break}r+=s.toString()}else{if(s instanceof l["default"]){n.end=!0;break}if(Array.isArray(s)){if(r+=i(s,n),n.end)break}else r+=p["default"].stringify(s)}}return r}function i(e,t){for(var n="",r=0,a=e.length;a>r;r++){var o=e[r];if(t.end)break;if(Array.isArray(o))n+=i(o,t);else{if(o instanceof l["default"]){t.end=!0;break}n+=p["default"].stringify(o)}}return n}function o(e,t,n){var r=a(e.index,t,{}),i=n.childNodes,o=i[e.start];if(1!=o.nodeType){var u=o.textContent;if(r!=u)if(/&([a-z]+|#\d+);/i.test(r)){var s=y["default"].NODE;s.innerHTML=p["default"].encodeHtml(r),n.replaceChild(s.firstChild,o)}else o.textContent=r}}function u(e,t){return a(e.index,t,{})}function s(e,t){(t.first||t.prev==g["default"].DOM)&&(t.record=e.slice())}Object.defineProperty(t,"__esModule",{value:!0});var c=n(3),l=r(c),f=n(6),d=(r(f),n(10)),h=r(d),_=n(2),p=r(_),v=n(11),y=r(v),m=n(14),g=r(m);t["default"]={update:o,value:u,record:s}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(4),c=r(s),l=function(e){function t(){var e;a(this,t);for(var n=arguments.length,r=Array(n),o=0;n>o;o++)r[o]=arguments[o];return i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(r)))}return o(t,e),u(t,[{key:"toString",value:function(){return""}},{key:"__onDom",value:function(){this.__dom=!0,c["default"].fakeDom(this.children)}}]),t}(c["default"]);t["default"]=l},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Array.prototype,r=Object.create(n);["push","pop","shift","unshift","splice","sort","reverse"].forEach(function(e){var t=n[e];Object.defineProperty(r,e,{value:function(){for(var e=arguments.length,n=new Array(e);e--;)n[e]=arguments[e];var r=t.apply(this,n);return Array.isArray(this.__cb__)&&this.__cb__.forEach(function(e){e()}),r}})}),t["default"]=r},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(2),i=r(a),o=0,u=1,s=2,c=1,l=2,f={button:{disabled:c},input:{autofocus:c,checked:c,defaultChecked:l,defaultchecked:l,defaultValue:l,defaultvalue:l,disabled:c,multiple:c,readOnly:c,readonly:c,required:c},link:{disabled:c},option:{defaultSelected:l,defaultselected:l,disabled:c,selected:c,text:l},select:{autofocus:c,disabled:c,multiple:c,selectedIndex:l,selectedindex:l},textarea:{autofocus:c,defaultValue:l,defaultvalue:l,disabled:c,readOnly:c,readonly:c}},d={button:{disabled:s},input:{autofocus:s,checked:s,defaultChecked:s,defaultchecked:s,defaultValue:u,defaultvalue:u,disabled:s,readOnly:s,readonly:s,required:s,value:u},link:{checked:s},option:{defaultSelected:s,defaultselected:s,disabled:s,selected:s,text:u},select:{autofocus:s,disabled:s,required:s,selectedIndex:o,selectedindex:o,value:u},textarea:{autofocus:s,defaultValue:u,defaultvalue:u,disabled:s,readOnly:s,readonly:s,required:s,value:u}},h={defaultchecked:"defaultChecked",defaultselected:"defaultSelected",defaultvalue:"defautlValue",readonly:"readOnly",selectindex:"selectIndex"};t["default"]={RENDER_EXIST:c,RENDER_DOM:l,special:function(e,t){if(f.hasOwnProperty(e)){var n=f[e];if(n.hasOwnProperty(t))return n[t]}},update:function(e,t,n,r,a){if(d.hasOwnProperty(e)){var c=d[e];if(c.hasOwnProperty(n)){switch(c=c[n],n=h[n]||n,c){case o:r=parseInt(r),t[n]=r||0;break;case u:r=i["default"].stringify(r),t[n]=r;break;case s:r=!!r,t[n]=r}return}}switch(n){case"className":n="class";break;case"htmlFor":n="for"}if(a)switch(n){case"id":case"class":n="migi-"+n}null===r||void 0===r?t.removeAttribute(n):t.setAttribute(n,r)}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t,n,r,a){var i;if(a){var o=E["default"].stringify(r);i=document.createTextNode(o||""),n>=t.length?e.appendChild(i):e.replaceChild(i,t[n]),r instanceof migi.NonVisualComponent&&r.emit(v["default"].DOM)}else{if(i=r.toString(),n>=t.length)e.insertAdjacentHTML("beforeend",i);else if(1==t[n].nodeType)t[n].insertAdjacentHTML("afterend",i),e.removeChild(t[n]);else{var u=T["default"].getParent(r.name);u.innerHTML=i,e.replaceChild(u.firstChild,t[n])}r.emit(v["default"].DOM)}}function i(e,t,n,r,a){var i;if(a){var o=E["default"].stringify(r);i=document.createTextNode(o||""),n>=t.length?e.appendChild(i):e.insertBefore(i,t[n]),r instanceof migi.NonVisualComponent&&r.emit(v["default"].DOM)}else{if(i=r.toString(),n>=t.length)e.insertAdjacentHTML("beforeend",i);else if(1==t[n].nodeType)t[n].insertAdjacentHTML("beforebegin",i);else{var u=T["default"].getParent(r.name);u.innerHTML=i,e.insertBefore(u.firstChild,t[n])}r.emit(v["default"].DOM)}}function o(e,t,n,r,a,u,s,c){if(Array.isArray(t)){a.push(0);for(var f=0,d=Math.max(t.length,1);d>f;f++){var h=t[f];a[a.length-1]=f,o(e,h,n,r,a,u,s&&f==d-1,c)}a.pop()}else if(t instanceof m["default"]&&!(t instanceof migi.NonVisualComponent)){if(t.__parent=c,t.__top=c.top,t.style=c.style,L["default"].set(t),u.hasOwnProperty("prev")){if(r.prev==C["default"].TEXT&&r.start++,i(e,e.childNodes,r.start++,t),s)switch(u.state){case Y:case I:r.t2d=!0;break;default:delete r.d2t}}else{switch(u.state=r.state,r.state){case I:r.start++;break;case Y:l(n,r),r.start++,r.t2d=!0;break;case q:r.t2d=!0}i(e,e.childNodes,r.start++,t)}u.d=!0,u.prev=r.prev=C["default"].DOM,r.state=V}else{if(u.hasOwnProperty("prev")){if(r.prev==C["default"].DOM?(M["default"].record(a,r),i(e,e.childNodes,r.start,t,!0)):l(n,r),s&&u.d)switch(l(n,r),u.state){case V:case q:delete r.t2d;break;default:delete r.d2t}}else switch(_(r,e,t,n,a),u.state=r.state,r.state){case I:r.d2t=!0;case Y:l(n,r);break;case q:M["default"].record(a,r),i(e,e.childNodes,r.start,t,!0),l(n,r);break;case V:M["default"].record(a,r),i(e,e.childNodes,r.start,t,!0),r.d2t=!0}u.prev=r.prev=C["default"].TEXT,r.state=Y}}function u(e,t,n,r,a,i){if(Array.isArray(t)){var o=t.length;t.forEach(function(t,s){
u(e,t,n,r,a,i&&s==o-1)})}else if(t instanceof m["default"]&&!(t instanceof migi.NonVisualComponent)){if(a.hasOwnProperty("prev")){if(a.prev==C["default"].TEXT?(a.d&&s(e,r.start+1),s(e,r.start+1)):r.prev==C["default"].TEXT?s(e,r.start+1):s(e,r.start),i)switch(r.state){case Y:case I:r.d2t=!0;break;default:delete r.t2d}}else switch(r.state){case I:s(e,r.start+1),r.state=Y,r.prev=C["default"].TEXT,r.d2t=!0;break;case Y:s(e,r.start+1),r.prev=C["default"].TEXT,r.d2t=!0;break;case q:s(e,r.start),r.state=V,r.prev=C["default"].DOM;break;case V:s(e,r.start),r.prev=C["default"].DOM}a.d=!0,a.prev=C["default"].DOM,x["default"].add(t.__destroy())}else{if(a.hasOwnProperty("prev")){if(a.prev==C["default"].DOM&&l(n,r),i&&a.d)switch(s(e,r.start+1),r.state){case V:case q:r.t2d=!0;break;default:delete r.d2t}}else switch(r.state){case I:s(e,r.start+1),l(n,r),r.state=Y,r.prev=C["default"].TEXT;break;case Y:l(n,r),r.prev=C["default"].TEXT;break;case V:s(e,r.start),r.state=V,r.prev=C["default"].DOM,r.t2d=!0;break;case q:r.prev=C["default"].DOM,r.t2d=!0}a.prev=C["default"].TEXT}}function s(e,t){e.childNodes[t]&&e.removeChild(e.childNodes[t])}function c(e,t){return(void 0===e||null===e)&&(e=""),(void 0===t||null===t)&&(t=""),e.toString()==t.toString()}function l(e,t){var n=e.length;(!n||e[n-1].start<t.start)&&e.push({start:t.start,index:t.record.slice()})}function f(e,t){if(e!=t){var n=e.element;["uid","__element","__parent","__top","__style","__dom","__names"].forEach(function(n){t[n]=e[n]}),L["default"].set(t);var r={};e.__props.forEach(function(e){var n=e[0],a=e[1];if(!/^on[a-zA-Z]/.test(n))if(r[n]=!0,t.props.hasOwnProperty(n)){var i=t.props[n];i!==a&&t.__updateAttr(n,i),t.__cache[n]=i}else t.__updateAttr(n,null),delete t.__cache[n]}),e.__removeListener(),t.__props.forEach(function(e){var n=e[0],a=e[1];if(/^on[a-zA-Z]/.test(n)){var i=n.slice(2).toLowerCase();t.__addListener(i,function(e){e=e||window.event,F["default"](e);var n=e.target,r=n.getAttribute("migi-uid"),i=L["default"].get(r);a instanceof w["default"]?a.cb.call(a.context,e,t,i):E["default"].isFunction(a)?a(e,t,i):Array.isArray(a)&&a.forEach(function(n){var r=n[1];X["default"](e,n[0],t)&&(r instanceof w["default"]?r.cb.call(r.context,e,t,i):E["default"].isFunction(r)&&r(e,t,i))})})}else r.hasOwnProperty(n)||t.__updateAttr(n,a)}),t.__style&&t.__updateStyle(!0);var a=[];if(h(n,e.children,t.children,a,{start:0,record:[],first:!0},[],t),a.length){if("textarea"==t.name)return void t.__updateAttr("value",M["default"].value(a[0],t.children));a.forEach(function(e){M["default"].update(e,t.children,n)})}x["default"].add(e.__destroy())}}function d(e,t,n,r,a,i,o){a.first||(a.prev==C["default"].TEXT?a.state=Y:a.state=V),h(e,t,n,r,a,i,o),a.t2d||a.d2t||(a.state==q?a.t2d=!0:a.state==I&&(a.d2t=!0))}function h(e,t,n,r,s,d,p){var y=Array.isArray(t),g=Array.isArray(n);if(y&&g){var k=t.length,w=n.length,O=k?1:0,E=w?2:0;switch(d.push(0),s.first&&M["default"].record(d,s),O+E){case 0:s.state=Y,s.prev=C["default"].TEXT;break;case 1:h(e,t[0],n[0],r,s,d,p);for(var A={},T=1;k>T;T++)u(e,t[T],r,s,A,T==k-1);break;case 2:h(e,t[0],n[0],r,s,d,p);for(var A={},T=1;w>T;T++)d[d.length-1]=T,o(e,n[T],r,s,d,A,T==w-1,p);break;case 3:for(var T=0,P=Math.min(k,w);P>T;T++)d[d.length-1]=T,h(e,t[T],n[T],r,s,d,p);var A={};if(k>T)for(;k>T;T++)u(e,t[T],r,s,A,T==k-1);else if(w>T)for(;w>T;T++)d[d.length-1]=T,o(e,n[T],r,s,d,A,T==w-1,p)}d.pop()}else if(y){h(e,t[0],n,r,s,d,p);for(var A={},T=1,P=t.length;P>T;T++)u(e,t[T],r,s,A,T==P-1)}else if(g){d.push(0),h(e,t,n[0],r,s,d,p);for(var A={},T=1,P=n.length;P>T;T++)d[d.length-1]=T,o(e,n[T],r,s,d,A,T==P-1,p);d.pop()}else{var D=t instanceof m["default"]&&!(t instanceof migi.NonVisualComponent)?1:0,S=n instanceof m["default"]&&!(n instanceof migi.NonVisualComponent)?2:0;switch(D+S){case 0:s.first||_(s,e,n,r,d),M["default"].record(d,s);var j=e.childNodes;if(s.first)c(t,n)||l(r,s);else if(c(t,n))switch(s.state){case I:l(r,s),e.removeChild(j[s.start+1]);break;case q:l(r,s),i(e,j,s.start,n,!0)}else switch(s.state){case I:l(r,s),e.removeChild(j[s.start+1]);break;case q:l(r,s),i(e,j,s.start,n,!0);break;case V:M["default"].record(d,s);case Y:c(t,n)||l(r,s)}s.state=Y,s.prev=C["default"].TEXT;break;case 1:M["default"].record(d,s);var j=e.childNodes;if(s.first)a(e,j,s.start,n,!0);else switch(s.state){case I:case Y:l(r,s),e.removeChild(j[s.start+1]);break;case q:a(e,j,s.start++,n,!0);break;case V:a(e,j,s.start,n,!0)}x["default"].add(t.__destroy()),s.state=I,s.prev=C["default"].TEXT;break;case 2:n.__parent=p,n.__top=p.top,n.style=p.style,L["default"].set(n);var j=e.childNodes;if(s.first)a(e,j,s.start++,n);else switch(s.state){case I:s.start++;case V:a(e,j,s.start++,n);break;case q:i(e,j,s.start++,n);break;case Y:l(r,s),i(e,j,++s.start,n),s.start++}s.state=q,s.prev=C["default"].DOM;break;case 3:if(!s.first){switch(s.state){case I:case Y:s.start++}delete s.t2d,delete s.d2t}var N=t instanceof b["default"]?1:0,R=n instanceof b["default"]?2:0;switch(N+R){case 0:t.name==n.name?(t.__parent=p,t.__top=p.top,f(t,n)):(n.__parent=p,n.__top=p.top,n.style=p.style,e=t.element,e.insertAdjacentHTML("afterend",n.toString()),e.parentNode.removeChild(e),n.emit(v["default"].DOM),H["default"].del(t.uid),L["default"].set(n),x["default"].add(t.__destroy()));break;default:e=t.element,e.insertAdjacentHTML("afterend",n.toString()),e.parentNode.removeChild(e),n.__parent=p,n.__top=p.top,R?H["default"].del(t.virtualDom.uid):(H["default"].del(t.uid),n.style=p.style),n.emit(v["default"].DOM),L["default"].set(n),x["default"].add(t.__destroy())}s.state=V,s.prev=C["default"].DOM,s.start++}n instanceof migi.NonVisualComponent&&n.emit(v["default"].DOM)}s.first=!1}function _(e,t,n,r,a){e.t2d?(delete e.t2d,M["default"].record(a,e),i(t,t.childNodes,e.start,n,!0)):e.d2t&&(delete e.d2t,l(r,e),s(t,e.start+1))}Object.defineProperty(t,"__esModule",{value:!0});var p=n(1),v=r(p),y=n(3),m=r(y),g=n(4),b=r(g),k=n(7),w=r(k),O=n(2),E=r(O),A=n(11),T=r(A),P=n(23),M=r(P),D=n(19),x=r(D),S=n(14),C=r(S),j=n(5),L=r(j),N=n(22),H=r(N),R=n(21),F=r(R),B=n(20),X=r(B),I=0,V=1,q=2,Y=3;t["default"]={diff:d,check:_}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={domactivate:"DOMActivate",domfocusin:"DOMFocusIn",msgestureend:"MSGestureEnd",mspointerdown:"MSPointerDown",mspointermove:"MSPointerMove",mspointerup:"MSPointerUp",mspointercancel:"MSPointerCancel"}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t,n,r,a,o){var s=[];if(i(e.length-1,e,t,n,r["default"],a,s,o),r.media&&(r.media.forEach(function(r){var c=!1;r.query.forEach(function(l){if(!c)for(var f=0,d=l.length;d>f;f++){var h=l[f];if(Array.isArray(h)){var _=h[0].replace(/^-[a-z]+-/i,"").replace(/^mso-/i,"").toLowerCase(),p=h[1];if(/(px|\d)$/.test(p))switch(p=p.replace(/px$/,""),_){case"width":case"height":var v=u(_);if(v==p)return c=!0,void i(e.length-1,e,t,n,r.style,a,s,o);break;case"min-width":case"max-width":case"min-height":case"max-height":var v=u(_.slice(4));if(0==_.indexOf("min-")){if(v>=p)return c=!0,void i(e.length-1,e,t,n,r.style,a,s,o)}else if(p>=v)return c=!0,void i(e.length-1,e,t,n,r.style,a,s,o);break;case"device-width":case"device-height":var v=window.screen[_.slice(7)];v==p&&(c=!0,i(e.length-1,e,t,n,r.style,a,s,o));break;case"min-device-width":case"min-device-height":case"max-device-width":case"max-device-height":var v=window.screen[_.slice(11)];if(0==_.indexOf("min-")){if(v>=p)return c=!0,void i(e.length-1,e,t,n,r.style,a,s,o)}else if(p>=v)return c=!0,void i(e.length-1,e,t,n,r.style,a,s,o);break;case"aspect-ratio":var y=u("width"),m=u("height"),v=y/m,g=p.split("/");if(g=g[0]/g[1],v==g)return c=!0,void i(e.length-1,e,t,n,r.style,a,s,o);break;case"min-aspect-ratio":case"max-aspect-ratio":var y=u("width"),m=u("height"),v=y/m,g=p.split("/");if(g=g[0]/g[1],0==_.indexOf("min-")){if(v>=p)return c=!0,void i(e.length-1,e,t,n,r.style,a,s,o)}else if(p>=v)return c=!0,void i(e.length-1,e,t,n,r.style,a,s,o);break;case"device-aspect-ratio":var y=window.screen.width,m=window.screen.height,v=y/m,g=p.split("/");if(g=g[0]/g[1],v==g)return c=!0,void i(e.length-1,e,t,n,r.style,a,s,o);break;case"min-device-aspect-ratio":case"max-device-aspect-ratio":var y=window.screen.width,m=window.screen.height,v=y/m,g=p.split("/");if(g=g[0]/g[1],0==_.indexOf("min-")){if(v>=p)return c=!0,void i(e.length-1,e,t,n,r.style,a,s,o)}else if(p>=v)return c=!0,void i(e.length-1,e,t,n,r.style,a,s,o);break;case"device-pixel-ratio":var v=window.devicePixelRatio;if(v==p)return c=!0,void i(e.length-1,e,t,n,r.style,a,s,o);break;case"min-device-pixel-ratio":case"max-device-pixel-ratio":var v=window.devicePixelRatio;if(0==_.indexOf("min-")){if(v>=p)return c=!0,void i(e.length-1,e,t,n,r.style,a,s,o)}else if(p>=v)return c=!0,void i(e.length-1,e,t,n,r.style,a,s,o)}}}})}),o)){var c,l=function(){c&&clearTimeout(c),c=setTimeout(function(){_["default"].get(a.uid).__updateStyle()},100)};window.addEventListener("resize",l),v["default"].add(a.uid,l)}d["default"](s,function(e,t){var n=e[2],r=t[2];if(n==r)return e[0]>t[0];for(var a=0;3>a;a++)if(n[a]!=r[a])return n[a]>r[a];return e[0]>t[0]});var f="";return s.forEach(function(e){f+=e[1]+";"}),f}function i(e,t,n,r,a,u,s,c,f){for(var d=m["default"].combo(n[e],t[e],r[e],a),h=0,p=d.length;p>h;h++){var y=d[h];if(a.hasOwnProperty(y)){var g=a[y];if(e&&(i(e-1,t,n,r,g,u.parent,s,c),!f))for(var b=e-2;b>=0;b--)i(b,t,n,r,g,u.parent,s,c);if(g.hasOwnProperty("_v")&&o(s,g),c&&g.hasOwnProperty("_:")&&g["_:"].forEach(function(e){e[0].forEach(function(e){var t=u.uid;switch(e){case"hover":var n=function(){_["default"].get(t).__hover=!0,_["default"].get(t).__updateStyle()},r=function(){_["default"].get(t).__hover=!1,_["default"].get(t).__updateStyle()},a=function(){u.element.addEventListener("mouseenter",n),u.element.addEventListener("mouseleave",r)};u.__dom?a():u.once(l["default"].DOM,a),u.__onHover=n,u.__outHover=r;break;case"active":var i=function(){_["default"].get(t).__active=!0,_["default"].get(t).__updateStyle()},o=function(){_["default"].get(t).__active=!1,_["default"].get(t).__updateStyle()},s=function(){u.element.addEventListener("mousedown",i),window.addEventListener("mouseup",o,!0),window.addEventListener("touchend",o,!0),window.addEventListener("touchcancel",o,!0),window.addEventListener("blur",o),window.addEventListener("dragend",o)};u.__dom?s():u.once(l["default"].DOM,s),v["default"].add(t,o)}})}),g.hasOwnProperty("_:")||g.hasOwnProperty("_[")){var k,w=function(a){if(a&&a.hasOwnProperty("_[")){var l=a["_["];l.forEach(function(a){var f=m["default"].attr(a[0],u);f&&(l=a[1],e&&i(e-1,t,n,r,l,u.parent,s,c),l.hasOwnProperty("_v")&&o(s,l))})}};g.hasOwnProperty("_:")&&(k=g["_:"],k.forEach(function(a){var l=m["default"].pseudo(a[0],u,y);l&&(k=a[1],e&&i(e-1,t,n,r,k,u.parent,s,c),k.hasOwnProperty("_v")&&o(s,k))})),w(g),w(k)}if(g.hasOwnProperty("_>")){var k=g["_>"];i(e-1,t,n,r,k,u.parent,s,!1,f)}if(g.hasOwnProperty("_+")){var k=g["_+"],O=u.prev();O&&Object.keys(k).forEach(function(a){m["default"].nci(a,O)||(k[a].hasOwnProperty("_v")&&o(s,k[a]),i(e-1,t,n,r,k[a],u.parent,s,!1,f))})}if(g.hasOwnProperty("_~")){var k=g["_~"],E=u.prevAll();if(E.length)for(var A=!1,h=E.length-1;h>=0;h--){var O=E[h];if(Object.keys(k).forEach(function(a){m["default"].nci(a,O)||(k[a].hasOwnProperty("_v")&&o(s,k[a]),A=!0,i(e-1,t,n,r,k[a],u.parent,s,!1,f))}),A)break}}}}}function o(e,t){t._v.forEach(function(n){n[2]=t._p,e.push(n)})}function u(e){var t=e.charAt(0).toUpperCase()+e.slice(1);return window["inner"+t]||document.documentElement["client"+t]||document.body["client"+t]}Object.defineProperty(t,"__esModule",{value:!0});var s=n(6),c=(r(s),n(1)),l=r(c),f=n(13),d=r(f),h=n(5),_=r(h),p=n(22),v=r(p),y=n(12),m=r(y);t["default"]=a},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),i=r(a),o=n(3),u=r(o),s=n(8),c=r(s),l=n(9),f=r(l),d=n(16),h=r(d),_=n(4),p=r(_),v=n(6),y=r(v),m=n(24),g=r(m),b=n(15),k=r(b),w=n(10),O=r(w),E=n(7),A=r(E),T=n(19),P=r(T),M=n(2),D=r(M),x=n(11),S=r(x),C=n(13),j=r(C),L=n(5),N=r(L),H=n(17),R=r(H),F={render:function(e,t){return t&&e.appendTo(t),e},createCp:function(e,t,n){return N["default"].set(new e(t,n))},createVd:function(e,t,n){if({script:!0,style:!0}.hasOwnProperty(e.toLowerCase()))throw new Error("can not create VirtualDom of: "+e);return N["default"].set(P["default"].index?P["default"].get().__reset(e,t,n):new y["default"](e,t,n))},Event:i["default"],Model:f["default"],CacheModel:h["default"],EventBus:c["default"],eventBus:new c["default"],Element:u["default"],Component:p["default"],NonVisualComponent:g["default"],CacheComponent:k["default"],VirtualDom:y["default"],Obj:O["default"],Cb:A["default"],util:D["default"],browser:S["default"],sort:j["default"],hash:N["default"],Fastclick:R["default"],name:function(e,t){p["default"].prototype.isPrototypeOf(e.prototype)&&(e.__migiName=t)}};"undefined"!=typeof window&&(window.migi=F,document.body?R["default"].attach(document.body):document.addEventListener("DOMContentLoaded",function(){R["default"].attach(document.body)})),t["default"]=F},function(e,t){"use strict";function n(e,t,n,r){return Math.abs(e-t)>=Math.abs(n-r)?e-t>0?"left":"right":n-r>0?"up":"down"}function r(){f&&clearTimeout(f),d&&clearTimeout(d),f=d=null,b={},g=[]}function a(e){return("touch"==e.pointerType||e.pointerType==e.MSPOINTER_TYPE_TOUCH)&&e.isPrimary}function i(e,t){return e.type=="pointer"+t||e.type.toLowerCase()=="mspointer"+t}function o(){document.addEventListener("touchmove",u,!0),document.addEventListener("MSPointerMove",u,!0),document.addEventListener("pointermove",u,!0),document.addEventListener("touchend",c,!0),document.addEventListener("MSPointerUp",c,!0),document.addEventListener("pointerup",c,!0),document.addEventListener("MSGestureEnd",s,!0),document.addEventListener("touchcancel",r,!0),document.addEventListener("MSPointerCancel",r,!0),document.addEventListener("pointercancel",r,!0),window.addEventListener("scroll",r),window.addEventListener("blur",r)}function u(e){b.vd&&(!(y=i(e,"move"))||a(e))&&(v=y?e:e.touches[0],b.x2=v.pageX,b.y2=v.pageY,O+=Math.abs(b.x1-b.x2),E+=Math.abs(b.y1-b.y2))}function s(e){if(b.vd){var t=e.velocityX>1?"right":e.velocityX<-1?"left":e.velocityY>1?"down":e.velocityY<-1?"up":null;t&&(("swipe"==b.name||b.name==t)&&b.cb(e),g.forEach(function(n){("swipe"==n.name||n.name==t)&&n.cb(e)}))}}function c(e){b.vd&&(!(y=i(e,"up"))||a(e))&&(b.x2&&Math.abs(b.x1-b.x2)>30||b.y2&&Math.abs(b.y1-b.y2)>30?d=setTimeout(function(){var t="swipe"+n(b.x1,b.x2,b.y1,b.y2);("swipe"==b.name||b.name==t)&&b.cb(e),g.forEach(function(n){("swipe"==n.name||n.name==t)&&n.cb(e)}),b={},g=[]},0):30>O&&30>E?f=setTimeout(function(){var t=Date.now()-w>k;t?("longtap"==b.name&&b.cb(e),g.forEach(function(t){"longtap"==t.name&&t.cb(e)})):b.isDoubleTap&&b.vd==l.vd&&("doubletap"==b.name&&b.cb(e),g.forEach(function(t){"doubletap"==t.name&&t.cb(e)})),b={},g=[]},0):(b={},g=[]),O=E=0)}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(e,t,n,r){function u(r){if(!(y=i(r,"down"))||a(r)){if(b.first)return void g.push({vd:e,name:t,cb:n});v=y?r:r.touches[0],r.touches&&1===r.touches.length&&b.x2&&(b.x2=void 0,b.y2=void 0),b={vd:e,name:t,cb:n,first:!0,x1:v.pageX,y1:v.pageY},l=b,_=Date.now(),p=_-w,w=_,p>0&&250>p&&(b.isDoubleTap=!0),h&&y&&h.addPointer(r.pointerId)}}m||(m=!0,o()),r.push(["touchstart",u]),r.push(["MSPointerDown",u]),r.push(["pointerdown",u]);var s=e.element;s.addEventListener("touchstart",u),s.addEventListener("MSPointerDown",u),s.addEventListener("pointerdown",u)};var l,f,d,h,_,p,v,y,m,g=[],b={},k=750,w=0,O=0,E=0},function(e,t,n){e.exports=n(30)["default"]}]);